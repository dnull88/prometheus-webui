{"ast":null,"code":"/**\n *\n * THIS FILE WAS COPIED INTO PROMETHEUS FROM GRAFANA'S VENDORED FORK OF FLOT\n * (LIVING AT https://github.com/grafana/grafana/tree/master/public/vendor/flot),\n * WHICH CONTAINS FIXES FOR DISPLAYING NULL VALUES IN STACKED GRAPHS. THE ORIGINAL\n * FLOT CODE WAS LICENSED UNDER THE MIT LICENSE AS STATED BELOW. ADDITIONAL\n * CHANGES HAVE BEEN CONTRIBUTED TO THE GRAFANA FORK UNDER AN APACHE 2 LICENSE, SEE\n * https://github.com/grafana/grafana/blob/master/license.\n *\n */\n\n/* eslint-disable prefer-spread */\n\n/* eslint-disable no-loop-func */\n\n/* eslint-disable @typescript-eslint/no-this-alias */\n\n/* eslint-disable no-redeclare */\n\n/* eslint-disable no-useless-escape */\n\n/* eslint-disable prefer-const */\n\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\n\n/* eslint-disable @typescript-eslint/no-use-before-define */\n\n/* eslint-disable eqeqeq */\n\n/* eslint-disable no-var */\n\n/* Flot plugin for stacking data sets rather than overlyaing them.\n\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\nThe plugin assumes the data is sorted on x (or y if stacking horizontally).\nFor line charts, it is assumed that if a line has an undefined gap (from a\nnull point), then the line above it should have the same gap - insert zeros\ninstead of \"null\" if you want another behaviour. This also holds for the start\nand end of the chart. Note that stacking a mix of positive and negative values\nin most instances doesn't make sense (so it looks weird).\n\nTwo or more series are stacked when their \"stack\" attribute is set to the same\nkey (which can be any number or string or just \"true\"). To specify the default\nstack, you can set the stack option like this:\n\n    series: {\n        stack: null/false, true, or a key (number/string)\n    }\n\nYou can also specify it for a single series, like this:\n\n    $.plot( $(\"#placeholder\"), [{\n        data: [ ... ],\n        stack: true\n    }])\n\nThe stacking order is determined by the order of the data series in the array\n(later series end up on top of the previous).\n\nInternally, the plugin modifies the datapoints in each series, adding an\noffset to the y value. For line series, extra data points are inserted through\ninterpolation. If there's a second y value, it's also adjusted (e.g for bar\ncharts or filled areas).\n\n*/\n(function ($) {\n  var options = {\n    series: {\n      stack: null\n    } // or number/string\n\n  };\n\n  function init(plot) {\n    function findMatchingSeries(s, allseries) {\n      var res = null;\n\n      for (var i = 0; i < allseries.length; ++i) {\n        if (s == allseries[i]) break;\n        if (allseries[i].stack == s.stack) res = allseries[i];\n      }\n\n      return res;\n    }\n\n    function stackData(plot, s, datapoints) {\n      if (s.stack == null || s.stack === false) return;\n      var other = findMatchingSeries(s, plot.getData());\n      if (!other) return;\n      var ps = datapoints.pointsize,\n          points = datapoints.points,\n          otherps = other.datapoints.pointsize,\n          otherpoints = other.datapoints.points,\n          newpoints = [],\n          px,\n          py,\n          intery,\n          qx,\n          qy,\n          bottom,\n          withlines = s.lines.show,\n          horizontal = s.bars.horizontal,\n          withbottom = ps > 2 && (horizontal ? datapoints.format[2].x : datapoints.format[2].y),\n          withsteps = withlines && s.lines.steps,\n          keyOffset = horizontal ? 1 : 0,\n          accumulateOffset = horizontal ? 0 : 1,\n          i = 0,\n          j = 0,\n          l,\n          m;\n\n      while (true) {\n        if (i >= points.length && j >= otherpoints.length) break;\n        l = newpoints.length;\n\n        if (i < points.length && points[i] == null) {\n          // take the points from the previous series\n          for (m = 0; m < ps; ++m) {\n            newpoints.push(otherpoints[i + m]);\n          }\n\n          if (withbottom) newpoints[l + 2] = otherpoints[i + accumulateOffset];\n          i += ps;\n        } else if (i >= points.length) {\n          j += otherps;\n        } else if (j >= otherpoints.length) {\n          // take the remaining points from the current series\n          for (m = 0; m < ps; ++m) {\n            newpoints.push(points[i + m]);\n          }\n\n          i += ps;\n        } else if (j < otherpoints.length && otherpoints[j] == null) {\n          // ignore point\n          j += otherps;\n        } else {\n          // cases where we actually got two points\n          px = points[i + keyOffset];\n          py = points[i + accumulateOffset];\n          qx = otherpoints[j + keyOffset];\n          qy = otherpoints[j + accumulateOffset];\n          bottom = 0;\n\n          if (px == qx) {\n            for (m = 0; m < ps; ++m) {\n              newpoints.push(points[i + m]);\n            }\n\n            newpoints[l + accumulateOffset] += qy;\n            bottom = qy;\n            i += ps;\n            j += otherps;\n          } else if (px > qx) {\n            // take the point from the previous series so that next series will correctly stack\n            if (i == 0) {\n              for (m = 0; m < ps; ++m) {\n                newpoints.push(otherpoints[j + m]);\n              }\n\n              bottom = qy;\n            } // we got past point below, might need to\n            // insert interpolated extra point\n\n\n            if (i > 0 && points[i - ps] != null) {\n              intery = py + (points[i - ps + accumulateOffset] - py) * (qx - px) / (points[i - ps + keyOffset] - px);\n              newpoints.push(qx);\n              newpoints.push(intery + qy);\n\n              for (m = 2; m < ps; ++m) {\n                newpoints.push(points[i + m]);\n              }\n\n              bottom = qy;\n            }\n\n            j += otherps;\n          } else {\n            // px < qx\n            for (m = 0; m < ps; ++m) {\n              newpoints.push(points[i + m]);\n            } // we might be able to interpolate a point below,\n            // this can give us a better y\n\n\n            if (j > 0 && otherpoints[j - otherps] != null) bottom = qy + (otherpoints[j - otherps + accumulateOffset] - qy) * (px - qx) / (otherpoints[j - otherps + keyOffset] - qx);\n            newpoints[l + accumulateOffset] += bottom;\n            i += ps;\n          }\n\n          if (l != newpoints.length && withbottom) newpoints[l + 2] = bottom;\n        } // maintain the line steps invariant\n\n\n        if (withsteps && l != newpoints.length && l > 0 && newpoints[l] != null && newpoints[l] != newpoints[l - ps] && newpoints[l + 1] != newpoints[l - ps + 1]) {\n          for (m = 0; m < ps; ++m) {\n            newpoints[l + ps + m] = newpoints[l + m];\n          }\n\n          newpoints[l + 1] = newpoints[l - ps + 1];\n        }\n      }\n\n      datapoints.points = newpoints;\n    }\n\n    plot.hooks.processDatapoints.push(stackData);\n  }\n\n  $.plot.plugins.push({\n    init: init,\n    options: options,\n    name: 'stack',\n    version: '1.2'\n  });\n})(window.jQuery);","map":{"version":3,"sources":["/app/src/vendor/flot/jquery.flot.stack.js"],"names":["$","options","series","stack","init","plot","findMatchingSeries","s","allseries","res","i","length","stackData","datapoints","other","getData","ps","pointsize","points","otherps","otherpoints","newpoints","px","py","intery","qx","qy","bottom","withlines","lines","show","horizontal","bars","withbottom","format","x","y","withsteps","steps","keyOffset","accumulateOffset","j","l","m","push","hooks","processDatapoints","plugins","name","version","window","jQuery"],"mappings":"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","sourcesContent":["/**\n *\n * THIS FILE WAS COPIED INTO PROMETHEUS FROM GRAFANA'S VENDORED FORK OF FLOT\n * (LIVING AT https://github.com/grafana/grafana/tree/master/public/vendor/flot),\n * WHICH CONTAINS FIXES FOR DISPLAYING NULL VALUES IN STACKED GRAPHS. THE ORIGINAL\n * FLOT CODE WAS LICENSED UNDER THE MIT LICENSE AS STATED BELOW. ADDITIONAL\n * CHANGES HAVE BEEN CONTRIBUTED TO THE GRAFANA FORK UNDER AN APACHE 2 LICENSE, SEE\n * https://github.com/grafana/grafana/blob/master/license.\n *\n */\n\n/* eslint-disable prefer-spread */\n/* eslint-disable no-loop-func */\n/* eslint-disable @typescript-eslint/no-this-alias */\n/* eslint-disable no-redeclare */\n/* eslint-disable no-useless-escape */\n/* eslint-disable prefer-const */\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\n/* eslint-disable @typescript-eslint/no-use-before-define */\n/* eslint-disable eqeqeq */\n/* eslint-disable no-var */\n\n/* Flot plugin for stacking data sets rather than overlyaing them.\n\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\nThe plugin assumes the data is sorted on x (or y if stacking horizontally).\nFor line charts, it is assumed that if a line has an undefined gap (from a\nnull point), then the line above it should have the same gap - insert zeros\ninstead of \"null\" if you want another behaviour. This also holds for the start\nand end of the chart. Note that stacking a mix of positive and negative values\nin most instances doesn't make sense (so it looks weird).\n\nTwo or more series are stacked when their \"stack\" attribute is set to the same\nkey (which can be any number or string or just \"true\"). To specify the default\nstack, you can set the stack option like this:\n\n    series: {\n        stack: null/false, true, or a key (number/string)\n    }\n\nYou can also specify it for a single series, like this:\n\n    $.plot( $(\"#placeholder\"), [{\n        data: [ ... ],\n        stack: true\n    }])\n\nThe stacking order is determined by the order of the data series in the array\n(later series end up on top of the previous).\n\nInternally, the plugin modifies the datapoints in each series, adding an\noffset to the y value. For line series, extra data points are inserted through\ninterpolation. If there's a second y value, it's also adjusted (e.g for bar\ncharts or filled areas).\n\n*/\n\n(function($) {\n  const options = {\n    series: { stack: null }, // or number/string\n  };\n\n  function init(plot) {\n    function findMatchingSeries(s, allseries) {\n      let res = null;\n      for (let i = 0; i < allseries.length; ++i) {\n        if (s == allseries[i]) break;\n\n        if (allseries[i].stack == s.stack) res = allseries[i];\n      }\n\n      return res;\n    }\n\n    function stackData(plot, s, datapoints) {\n      if (s.stack == null || s.stack === false) return;\n\n      const other = findMatchingSeries(s, plot.getData());\n      if (!other) return;\n\n      let ps = datapoints.pointsize,\n        points = datapoints.points,\n        otherps = other.datapoints.pointsize,\n        otherpoints = other.datapoints.points,\n        newpoints = [],\n        px,\n        py,\n        intery,\n        qx,\n        qy,\n        bottom,\n        withlines = s.lines.show,\n        horizontal = s.bars.horizontal,\n        withbottom = ps > 2 && (horizontal ? datapoints.format[2].x : datapoints.format[2].y),\n        withsteps = withlines && s.lines.steps,\n        keyOffset = horizontal ? 1 : 0,\n        accumulateOffset = horizontal ? 0 : 1,\n        i = 0,\n        j = 0,\n        l,\n        m;\n\n      while (true) {\n        if (i >= points.length && j >= otherpoints.length) break;\n\n        l = newpoints.length;\n\n        if (i < points.length && points[i] == null) {\n          // take the points from the previous series\n          for (m = 0; m < ps; ++m) newpoints.push(otherpoints[i + m]);\n          if (withbottom) newpoints[l + 2] = otherpoints[i + accumulateOffset];\n          i += ps;\n        } else if (i >= points.length) {\n          j += otherps;\n        } else if (j >= otherpoints.length) {\n          // take the remaining points from the current series\n          for (m = 0; m < ps; ++m) newpoints.push(points[i + m]);\n          i += ps;\n        } else if (j < otherpoints.length && otherpoints[j] == null) {\n          // ignore point\n          j += otherps;\n        } else {\n          // cases where we actually got two points\n          px = points[i + keyOffset];\n          py = points[i + accumulateOffset];\n          qx = otherpoints[j + keyOffset];\n          qy = otherpoints[j + accumulateOffset];\n          bottom = 0;\n\n          if (px == qx) {\n            for (m = 0; m < ps; ++m) newpoints.push(points[i + m]);\n\n            newpoints[l + accumulateOffset] += qy;\n            bottom = qy;\n\n            i += ps;\n            j += otherps;\n          } else if (px > qx) {\n            // take the point from the previous series so that next series will correctly stack\n            if (i == 0) {\n              for (m = 0; m < ps; ++m) newpoints.push(otherpoints[j + m]);\n              bottom = qy;\n            }\n            // we got past point below, might need to\n            // insert interpolated extra point\n            if (i > 0 && points[i - ps] != null) {\n              intery = py + ((points[i - ps + accumulateOffset] - py) * (qx - px)) / (points[i - ps + keyOffset] - px);\n              newpoints.push(qx);\n              newpoints.push(intery + qy);\n              for (m = 2; m < ps; ++m) newpoints.push(points[i + m]);\n              bottom = qy;\n            }\n\n            j += otherps;\n          } else {\n            // px < qx\n            for (m = 0; m < ps; ++m) newpoints.push(points[i + m]);\n\n            // we might be able to interpolate a point below,\n            // this can give us a better y\n            if (j > 0 && otherpoints[j - otherps] != null)\n              bottom =\n                qy +\n                ((otherpoints[j - otherps + accumulateOffset] - qy) * (px - qx)) /\n                  (otherpoints[j - otherps + keyOffset] - qx);\n\n            newpoints[l + accumulateOffset] += bottom;\n\n            i += ps;\n          }\n\n          if (l != newpoints.length && withbottom) newpoints[l + 2] = bottom;\n        }\n\n        // maintain the line steps invariant\n        if (\n          withsteps &&\n          l != newpoints.length &&\n          l > 0 &&\n          newpoints[l] != null &&\n          newpoints[l] != newpoints[l - ps] &&\n          newpoints[l + 1] != newpoints[l - ps + 1]\n        ) {\n          for (m = 0; m < ps; ++m) newpoints[l + ps + m] = newpoints[l + m];\n          newpoints[l + 1] = newpoints[l - ps + 1];\n        }\n      }\n\n      datapoints.points = newpoints;\n    }\n\n    plot.hooks.processDatapoints.push(stackData);\n  }\n\n  $.plot.plugins.push({\n    init: init,\n    options: options,\n    name: 'stack',\n    version: '1.2',\n  });\n})(window.jQuery);\n"]},"metadata":{},"sourceType":"module"}